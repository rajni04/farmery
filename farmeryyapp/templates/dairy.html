{% extends 'base.html'%}
{% block main_content %}
{% load static %}

{% csrf_token %}

<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link rel="stylesheet" href="{% static 'css/styledairy.css' %}">
      
       
        <link rel="stylesheet" href="{% static 'css/bootstrapp.css' %}">
        
     
<form role="form" action="product_save" method="post">
    
                <!--<div class="container clearfix">-->
            <div id="no-solr-search-container" style="background-color: rgb(247, 213, 102);">
    <div class="header-background-default" style="background-color: rgb(247, 213, 102);">
        <div class="header-content-title">
            <h1>Catalog</h1>
        </div>
       
       
       

        </div>
    </div>
    <div class="novaworks-main-content" id ="list" style="background-color: rgb(247, 213, 102);"  >
        <div class="main container">
            <div class="columns-layout">
                <div class="col-main col-lg-12">
                    <style> 
                       
                       
                        span.price-dec{
                            line-height: 14px;
                            padding: 23px 10px;
                            width: 75px;
                            height: 75px;
                            background-color: #50a686;
                            font-size: 17px;
                            font-weight: 400;
                        }
                        small{font-size: 70% !important}
                        h4.product-summary{
                            margin: -20px 0px 0px 6px;
                            font-size: 15px;
                        }
                        h4.product-summary span{
                            color: #50a686;
                            font-size: 120%;
                        }
                        .item .product{
                            background: #e7ece8;
                            box-shadow: 1px 1px 8px #03a585;
                            padding: 0px;

                            margin-right: 15px;
                        }
                        h4.product-name{
                            border-bottom: 1px solid #fff;
                        }
                        .product-name a{
                            font-size: 18px;
                            font-weight: 600;
                            color: #50a686;
                        }
                        .item-product-image-box a .front img{
                            width: 100%
                        }
                        .item-product-image-box a .front{
                            height: 282px;
                        }
                        .product-hover-box span{
                            font-size: 13px;
                            font-weight: 400;
                        }
                        .product-hover-box div.text-left{
                            padding: 0px 10px;
                        }
                        .product-hover-box div{
                            text-align: left;
                        }
                        .product-hover-box h4{
                            padding-left: 10px;
                        }
                        .product-hover-box{
                            background: rgba(255,255,255,.8);
                            color: #000;
                        }
                  
                        @media (max-width: 640px){
                            .desc-ser {
                                    min-height: auto;
                            }
                            h4.product-summary{
                                text-align: center;
                            }
                            .grid-price {
                                padding: 0px;
                            }
                            .category-products .products-grid [class^=col-], .category-products .products-grid [class*=" col-"]{
                                padding: 0px
                            }
                            .item .product{
                                margin-bottom: 30px;
                                float: left;
                                width: 100%;
                            }
                        }

                    </style>
                
                    <div class="category-products">
                        <ul class="load_product products-grid row list-2col-3">


                            <script type="text/javascript">

                                function getPosts(){
                                    console.log('ok1')
                                    
                                   fetch('http://127.0.0.1:8000/api/product/',{
                                    method: 'GET',  
                                    headers:
                                    {
                                
                                    'Content-Type':'application/json',
                                    'Authorization':'Token b76f5047e9bce7ed2a48cb71275ef7b69e40e973'
                                    }
                                })
                                   .then(response => response.json())
                                   .then(function(data){
                                    console.log(data)
                                   
                                   })
                                    
                                    console.log('ok2')   
                                } 
                                getPosts();

                            
                            </script>
                            {% for product in products %}   
                                   
                                    <li class="item col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                       
                                        <div class="product">
                                            <div class="item-product-image-box">
                                                 
                                                <a href="/catalog/cow-milk-5-days-trial" class="product-image">
                                                    <div class="front margin-image">
                                                     <img src="{{product.img}}"  />
                                                     </div>
                                                    <span class="price-dec">₹ {{product.price}}<br><small>{{product.quantity}}</small></span>
                                                    <div class="product-intification-box"><i class="fa fa-circle-o-notch fa-spin"></i></div>
                                                    <div class="product-hover-box">
                                                        <div>
                                                            <h4>{{product.productname}}</h4>
                                                            <span>
                                                                <div class="text-left">
                                                                <p class="text-left">{{product.desc}}</p>  </div>
                                                            </span>
                                                        </div>
                                                       
                                                    </div>
                                                   
                                                </a>
                                            </div>
                                           
                                            <div class="product-info">
                                                <h4 class="product-name"> <a data-toggle="tooltip" data-placement="bottom" href="/catalog/cow-milk-5-days-trial" title="Cow Milk 5 Days Trial" class='product-name-link'> <span>{{product.productname}}</span> </a></h4>
                                                <div class="rating-product"></div>
                                                <div class="">
                                                    <div class="desc-ser">
                                                       
                                                    </div>
                                                </div>
                                                <div class="novaworks-quick-act grid-price">
                                                    <div class="col-sm-9 text-left">
                                                        <div class="desc-ser row">
                                                            <h4 class="product-summary">{{product.discountdesc}} <span class="price">₹<strike style='color:#000'>{{product.oldprice}}</strike>{{product.newdiscount}}</span></h4>
                                                            
                                                  </div>
                                                  
                                               
                                                        
                                                    </div>
                                                    <div class="col-sm-3">
                                                         <a href="/product_details/{{ product.id }}" button type="button"class="btn btn-primary" title="Book Now">Book Now </button></a>
                                                    </div>
                                                      
                                                    {% endfor %}  
                                                </div>
                                               
                                            </div>
                                            
                                    </li>       
                                         
                                   
                   </ul>
                  
                </div>
                <div class="col-right sidebar col-lg-3 col-md-2">
                    <div class="mini-cart-sidebar"></div>
                </div>
            </div>
        </div>
    </div>
</div>
        <!--</div>-->
       
                  
        
           
    </body>    
</html>


<script>

   function getPosts(){
    console.log('ok1')
    
   fetch('http://127.0.0.1:8000/api/product/')
   .then(data=>{
   // console.log(data.json())
    return data.json()    //returning the data to data2 thatsy we wrote seconf then

   }).then(data2 =>{
       console.log(data2)
   }).catch(err=>{
       console.log(err)
   })
    
    
} 
console.log('ok1')  

</script>













{% endblock main_content %}