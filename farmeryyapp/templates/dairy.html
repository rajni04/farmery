{% extends 'base.html'%}
{% block main_content %}
{% load static %}

{% csrf_token %}

<!DOCTYPE html>
<html>
    <head>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link rel="stylesheet" href="{% static 'css/styledairy.css' %}">
      
       
        <link rel="stylesheet" href="{% static 'css/bootstrapp.css' %}">
        
     
<form role="form" action="product_save" method="post">
    
                <!--<div class="container clearfix">-->
            <div id="no-solr-search-container" >
    <div class="header-background-default" style="background-color: rgb(247, 213, 102);">
        <div class="header-content-title">
            <h1>Catalog</h1>
        </div>
       
       
       

        </div>
    </div>
    <div class="novaworks-main-content" id ="list"  >
        <div class="main container">
            <div class="columns-layout">
                <div class="col-main col-lg-12">

                    <div class="col-sm-3" style="padding: 0px">
                        <div class="filter" id="navbar">
                           
                                    

                                          
                                    

                                            
                                    
                                 
                                    
                                  
                                 
                                    
                                     <div>


                                      
                      </div>
                            </form>    </div>
                    </div>
                   

                    <html>
                        <div class="col-main col-sm-9">
    <meta name="author" content="colorlib.com">
    <link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet" />
    <link href="{% static 'css2/main.css' %}" rel="stylesheet" />
  </head>
  <body>
    <div class="s003">
      <form method='get' action='/search'>
        <div class="inner-form">
          <div class="input-field first-wrap">
            <div class="input-select">
              <select data-trigger="" name="choices-single-defaul">
                <option placeholder="">Category</option>
                <select class="form-control" name="category" placeholder="NONE">
                    {% for category in category %}
                      <option value="{{ category.id }}">{{ category.cattype}}</option>
                    {% endfor %}
                </select>
              </select>
            </div>
          </div>
          <div class="input-field second-wrap">
            <input id="search" type="text" placeholder="Enter Keywords?" />
          </div>
          <div class="input-field third-wrap">
            <button class="btn-search" type="button">
              <svg class="svg-inline--fa fa-search fa-w-16" aria-hidden="true" data-prefix="fas" data-icon="search" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                <path fill="currentColor" d="M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"></path>
              </svg>
            </button>
          </div>
        </div>
      </form>
    </div>
</div>
    <script src="{% static 'js/choices.js' %}"></script>
    <script>
      const choices = new Choices('[data-trigger]',
      {
        searchEnabled: false,
        itemSelectText: '',
      });

    </script>
  </body><!-- This templates was made by Colorlib (https://colorlib.com) -->
</html>

                    <style> 
                       
                       
                        span.price-dec{
                            line-height: 14px;
                            padding: 23px 10px;
                            width: 75px;
                            height: 75px;
                            background-color: #50a686;
                            font-size: 17px;
                            font-weight: 400;
                        }
                        small{font-size: 70% !important}
                        h4.product-summary{
                            margin: -20px 0px 0px 6px;
                            font-size: 15px;
                        }
                        h4.product-summary span{
                            color: #50a686;
                            font-size: 120%;
                        }
                        .item .product{
                            background: #e7ece8;
                            box-shadow: 1px 1px 8px #03a585;
                            padding: 0px;

                            margin-right: 15px;
                        }
                        h4.product-name{
                            border-bottom: 1px solid #fff;
                        }
                        .product-name a{
                            font-size: 18px;
                            font-weight: 600;
                            color: #50a686;
                        }
                        .item-product-image-box a .front img{
                            width: 100%
                        }
                        .item-product-image-box a .front{
                            height: 282px;
                        }
                        .product-hover-box span{
                            font-size: 13px;
                            font-weight: 400;
                        }
                        .product-hover-box div.text-left{
                            padding: 0px 10px;
                        }
                        .product-hover-box div{
                            text-align: left;
                        }
                        .product-hover-box h4{
                            padding-left: 10px;
                        }
                        .product-hover-box{
                            background: rgba(255,255,255,.8);
                            color: #000;
                        }
                  
                        @media (max-width: 640px){
                            .desc-ser {
                                    min-height: auto;
                            }
                            h4.product-summary{
                                text-align: center;
                            }
                            .grid-price {
                                padding: 0px;
                            }
                            .category-products .products-grid [class^=col-], .category-products .products-grid [class*=" col-"]{
                                padding: 0px
                            }
                            .item .product{
                                margin-bottom: 30px;
                                float: left;
                                width: 100%;
                            }

                            .hero__search__form {
                                width: 610px;
                                height: 50px;
                                border: 1px solid #ebebeb;
                                position: relative;
                                float: left;
                            }


                            .s003 form .inner-form .input-field input {
                                height: 100%;
                                background: transparent;
                                border: 0;
                                display: block;
                                width: 100%;
                                padding: 10px 32px;
                                font-size: 16px;
                                color: #555;
                            }
                        }

                    </style>
                
                    <div class="category-products">
                        <ul class="load_product products-grid row list-2col-3">


                            <script type="text/javascript">

                                function getPosts(){
                                    console.log('ok1')
                                    
                                   fetch('http://127.0.0.1:8000/api/product/',{
                                    method: 'GET',  
                                    headers:
                                    {
                                
                                    'Content-Type':'application/json',
                                    'Authorization':'Token b76f5047e9bce7ed2a48cb71275ef7b69e40e973'
                                    }
                                })
                                   .then(response => response.json())
                                   .then(function(data){
                                    console.log(data)
                                   
                                   })
                                    
                                    console.log('ok2')   
                                } 
                                getPosts();

                            
                            </script>


                            
                            {% for product in products %}   
                                   
                                    <li class="item col-lg-4 col-md-4 col-sm-6 col-xs-12">
                                       
                                        <div class="product">
                                            <div class="item-product-image-box">
                                                 
                                                <a href="/catalog/cow-milk-5-days-trial" class="product-image">
                                                    <div class="front margin-image">
                                                     <img src="{{product.img}}"  />
                                                     </div>
                                                    <span class="price-dec">₹ {{product.price}}<br><small>{{product.quantity}}l</small></span>
                                                    <div class="product-intification-box"><i class="fa fa-circle-o-notch fa-spin"></i></div>
                                                    <div class="product-hover-box">
                                                        <div>
                                                            <h4>{{product.productname}}</h4>
                                                            <span>
                                                                <div class="text-left">
                                                                <p class="text-left">{{product.desc}}</p>  </div>
                                                            </span>
                                                        </div>
                                                       
                                                    </div>
                                                   
                                                </a>
                                            </div>
                                           
                                            <div class="product-info">
                                                <h4 class="product-name"> <a data-toggle="tooltip" data-placement="bottom" href="/catalog/cow-milk-5-days-trial" title="Cow Milk 5 Days Trial" class='product-name-link'> <span>{{product.productname}}</span> </a></h4>
                                                <div class="rating-product"></div>
                                                <div class="">
                                                    <div class="desc-ser">
                                                       
                                                    </div>
                                                </div>
                                                <div class="novaworks-quick-act grid-price">
                                                    <div class="col-sm-9 text-left">
                                                        <div class="desc-ser row">
                                                            <h4 class="product-summary">{{product.discountdesc}} <span class="price">₹<strike style='color:#000'>{{product.oldprice}}</strike>{{product.newdiscount}}</span></h4>
                                                            
                                                  </div>
                                                  
                                               
                                                        
                                                    </div>
                                                    <div class="col-sm-3">
                                                         <a href="/product_details/{{ product.id }}" button type="button"class="btn btn-primary" title="Book Now">Book Now </button></a>
                                                    </div>
                                                      
                                                    {% endfor %}  
                                                </div>
                                               
                                            </div>
                                            
                                    </li>       
                                         
                                   
                   </ul>
                  
                </div>
                <div class="col-right sidebar col-lg-3 col-md-2">
                    <div class="mini-cart-sidebar"></div>
                </div>
            </div>
        </div>
    </div>
</div>
        <!--</div>-->
       
                  
        
           
    </body>    
</html>


<script>

   function getPosts(){
    console.log('ok1')
    
   fetch('http://127.0.0.1:8000/api/product/')
   .then(data=>{
   // console.log(data.json())
    return data.json()    //returning the data to data2 thatsy we wrote seconf then

   }).then(data2 =>{
       console.log(data2)
   }).catch(err=>{
       console.log(err)
   })
    
    
} 
console.log('ok1')  

</script>













{% endblock main_content %}